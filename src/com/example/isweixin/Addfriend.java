package com.example.isweixin;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import utils.XmppConnection;import android.app.Activity;import android.os.Bundle;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.ArrayAdapter;import android.widget.BaseAdapter;import android.widget.EditText;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ListView;import android.widget.TextView;public class Addfriend extends Activity{	EditText addfriendname;	ListView addfriendresult;	List<HashMap<String, String>> results;	String []userAccounts = {"test1","test2"};;	String []userPhotes = {"photo1","photo2"};;	XmppConnection xmppConnection;	@Override	protected void onCreate(Bundle savedInstanceState) {		// TODO Auto-generated method stub		super.onCreate(savedInstanceState);		setContentView(R.layout.addfriend);		addfriendname = (EditText) findViewById(R.id.addfriendname);		addfriendresult = (ListView) findViewById(R.id.addfriendresult);		xmppConnection = XmppConnection.getInstance();		results =xmppConnection.searchUsers(addfriendname.getText().toString());//		userAccounts = new String[results.size()];//		userPhotes = new String[results.size()];		//		for(int i=0;i<results.size();i++)//		{//			userAccounts[i] = results.get(i).get("userAccount");//			userPhotes[i] = results.get(i).get("userPhote");//		}				BaseAdapter adapter = new BaseAdapter()		{			@Override			public int getCount() {				// TODO Auto-generated method stub				return 0;			}			@Override			public Object getItem(int position) {				// TODO Auto-generated method stub				return position;			}			@Override			public long getItemId(int arg0) {				// TODO Auto-generated method stub				return arg0;			}			@Override			public View getView(int position, View arg1, ViewGroup arg2) {				// TODO Auto-generated method stub				LinearLayout line = new LinearLayout(Addfriend.this);				line.setOrientation(0);				ImageView image = new ImageView(Addfriend.this);				TextView text = new TextView(Addfriend.this);				text.setText(userAccounts[position]+" "+userPhotes[position]);				//image.setImageDrawable(xmppConnection.getUserImage(userAccounts[position]));				image.setImageResource(R.drawable.abc_ab_bottom_solid_dark_holo);				line.addView(image);				line.addView(text);				return line;			}					};		addfriendresult.setAdapter(adapter);				addfriendresult.setOnItemClickListener(new OnItemClickListener(){			@Override			public void onItemClick(AdapterView<?> parent,View view,int position,long id)			{				xmppConnection.addUser(userAccounts[position], userAccounts[position]);				new MainActivity().addcontact(userAccounts[position]);			}		});	}	}